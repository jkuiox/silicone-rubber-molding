---
import { getCollection } from 'astro:content';
import InfiniteScroll from '../InfiniteScroll.astro';

const posts = [
  {
    title: 'Ultimate Guide to Silicone Sealing Rings in Industrial Applications',
    slug: 'silicone-sealing-rings-guide',
    excerpt: 'Comprehensive analysis of industrial silicone sealing rings, covering performance requirements, applications, and quality standards.',
    author: 'Dr. Michael Chen',
    date: '2024-01-20',
    category: 'Industrial',
    image: '/images/blog/sealing-rings.jpg',
    tags: ['Industrial', 'Manufacturing', 'Quality']
  },
  {
    title: 'Eco-Friendly Kitchen Revolution: The Truth About Silicone Kitchenware',
    slug: 'eco-friendly-silicone-kitchenware',
    excerpt: 'In-depth exploration of silicone kitchenware safety, environmental impact, and comparison with traditional materials.',
    author: 'Sarah Wilson',
    date: '2024-01-18',
    category: 'Consumer',
    image: '/images/blog/kitchenware.jpg',
    tags: ['Consumer', 'Sustainability', 'Safety']
  },
  {
    title: 'Beauty Egg Safety Guide: What You Need to Know',
    slug: 'beauty-egg-safety-guide',
    excerpt: 'Complete guide to silicone beauty egg safety, certifications, and proper usage guidelines.',
    author: 'Emma Zhang',
    date: '2024-01-15',
    category: 'Consumer',
    image: '/images/blog/beauty-egg.jpg',
    tags: ['Consumer', 'Safety', 'Certification']
  },
  {
    title: 'Modern Wine Preservation: The Complete Guide to Silicone Stoppers',
    slug: 'wine-preservation-silicone-stoppers',
    excerpt: 'Detailed analysis of silicone wine stopper technology, food safety standards, and preservation effectiveness.',
    author: 'James Wilson',
    date: '2024-01-12',
    category: 'Consumer',
    image: '/images/blog/wine-stoppers.jpg',
    tags: ['Consumer', 'Innovation', 'Food Safety']
  },
  {
    title: 'Medical-Grade Silicone in Healthcare: Focus on Instrument Buttons',
    slug: 'medical-silicone-instrument-buttons',
    excerpt: 'Expert insights into medical-grade silicone applications in healthcare instruments, focusing on safety and durability.',
    author: 'Dr. Sarah Chen',
    date: '2024-01-10',
    category: 'Medical',
    image: '/images/blog/medical-buttons.jpg',
    tags: ['Medical', 'Safety', 'Innovation']
  }
];

const currentPath = Astro.url.pathname;
const currentLang = currentPath.split('/')[1];
---

<div class="mt-12">
  <InfiniteScroll>
    <div class="masonry-grid">
      {posts.map((post) => (
        <article class="masonry-item bg-white rounded-lg shadow-sm overflow-hidden transform transition-all duration-300 hover:-translate-y-1 hover:shadow-md">
          <div class="relative">
            <img
              src={post.image}
              alt={post.title}
              class="w-full h-48 object-cover"
              loading="lazy"
            />
            <div class="absolute top-4 right-4">
              <span class="px-2 py-1 text-xs font-medium bg-primary-100 text-primary-800 rounded">
                {post.category}
              </span>
            </div>
          </div>
          
          <div class="p-6">
            <div class="flex flex-wrap gap-2 mb-3">
              {post.tags.map((tag) => (
                <a
                  href={`/${currentLang}/blog/tag/${tag.toLowerCase()}`}
                  class="text-xs font-medium text-gray-500 hover:text-primary-600"
                >
                  #{tag}
                </a>
              ))}
            </div>
            
            <h2 class="text-xl font-semibold text-gray-900 mb-2">
              <a
                href={`/${currentLang}/blog/${post.slug}`}
                class="hover:text-primary-600 transition-colors"
              >
                {post.title}
              </a>
            </h2>
            
            <p class="text-gray-500 mb-4">
              {post.excerpt}
            </p>
            
            <div class="flex items-center justify-between text-sm">
              <span class="text-gray-600">{post.author}</span>
              <time datetime={post.date} class="text-gray-500">
                {new Date(post.date).toLocaleDateString()}
              </time>
            </div>
          </div>
        </article>
      ))}
    </div>
  </InfiniteScroll>
</div>

<style>
.masonry-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 2rem;
}

@media (min-width: 768px) {
  .masonry-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1024px) {
  .masonry-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

.masonry-item {
  break-inside: avoid;
  margin-bottom: 2rem;
}
</style>